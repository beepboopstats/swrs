renv::status()
renv::snapshot()
renv::status()
renv::init()
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(warning = F)
knitr::opts_chunk$set(message = F)
## For more inspiration on customizing the html output, refer to the following:
# https://bookdown.org/yihui/rmarkdown/html-document.html#table-of-contents
# Load the libraries
library(dplyr)
googlesheets4::gs4_deauth()
for (i in list.files(here::here("R"), full.names = TRUE)) source(i)
# set path to the behavioral data within your repository
link = "https://docs.google.com/spreadsheets/d/167rT3pKlFvfqzlXSNDd31ad4pZSzWwvz4mtAnq2I0z8/edit?gid=0#gid=0"
dttm <- pretty_datetime(Sys.time())
dat <- googlesheets4::read_sheet(
link,
sheet = 1,
skip = 1,
col_types = "c"
) |>
janitor::clean_names()
tdat <- dat |>
select(
date,
observer = observer_initial,
col_id,
# time = foraging_time,
matches("^in"),
matches("^out")
) |>
mutate(
date = lubridate::mdy(date),
# time = lubridate::parse_date_time(time, "H:M:S p") |>
#   hms::as_hms(),
across(
matches("^in|^out"),
~ as.integer(.x)
)
)
sdat <- tdat |>
group_by(date, observer, col_id) |>
tidyr::pivot_longer(
cols = matches("^in|^out"),
names_to = "inout",
values_to = "rate"
) |>
ungroup() |>
mutate(
inout = if_else(stringr::str_detect(inout, "^in"), "in", "out")
) |>
group_by(
date, observer, col_id, inout
) |>
reframe(
rate = sum(rate, na.rm = TRUE)
) |>
arrange(
date, observer, col_id
)
# foo <- sdat |>
sdat |>
glimpse()
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date()
) |>
select(
date,
observer,
col_id
)
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-13")
) |>
select(
date,
observer,
col_id
)
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-12")
) |>
select(
date,
observer,
col_id
)
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
) |>
select(
date,
observer,
col_id
)
foo <- sdat |>
# sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
) |>
select(
date,
observer,
col_id
)
if(nrow(foo) > 0) {
foo |>
reactable::reactable(
groupBy = c("observer"),
columns = list(
date = reactable::colDef(minWidth = 150, name = "date (ymd)")
)
)
} else {
cat("None found! Good job people.")
}
foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
) |>
glimpse()
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
) |>
glimpse()
sdat <- tdat |>
group_by(date, observer, col_id) |>
tidyr::pivot_longer(
cols = matches("^in|^out"),
names_to = "inout",
values_to = "rate"
) |>
ungroup() |>
mutate(
inout = if_else(stringr::str_detect(inout, "^in"), "in", "out")
) |>
group_by(
date, observer, col_id, inout
) |>
reframe(
rate = sum(rate, na.rm = TRUE)
) |>
arrange(
date, observer, col_id
) |>
tidyr::pivot_wider(
names_from = inout,
values_from = rate,
)
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
) |>
glimpse()
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
) |>
select(
date,
observer,
col_id
)
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
)
# foo <- sdat |>
sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
)
if(nrow(foo) > 0) {
foo |>
reactable::reactable(
groupBy = c("observer"),
columns = list(
date = reactable::colDef(minWidth = 150, name = "date (ymd)")
)
)
} else {
cat("None found! Good job people.")
}
foo <- sdat |>
# sdat |>
# glimpse()
filter(
date > Sys.Date() |
date < lubridate::ymd("2025-08-14")
)
if(nrow(foo) > 0) {
foo |>
reactable::reactable(
groupBy = c("observer"),
columns = list(
date = reactable::colDef(minWidth = 150, name = "date (ymd)")
)
)
} else {
cat("None found! Good job people.")
}
